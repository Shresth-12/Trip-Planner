import {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } from "@google/generative-ai"
  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Mumbai, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON formatted travel plan for a budget-conscious couple visiting Mumbai for 3 days. I've included hotel options, a detailed itinerary with timings, costs, and images.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Mumbai\",\n    \"duration\": \"3 Days\",\n    \"budget\": \"Cheap\",\n     \"travelers\": \"Couple\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Hotel City Point\",\n      \"hotelAddress\": \"201, J.S.S. Road, Girgaum, Mumbai, Maharashtra 400004\",\n      \"price\": \"₹1500 - ₹2000 per night\",\n      \"hotelImageUrl\": \"https://lh3.googleusercontent.com/p/AF1QipO_f3L-m6f7a37LgE5u-e6tH0k_aY-j4t75qM9Z=w288-h192-n-rw\",\n      \"geoCoordinates\": {\n        \"latitude\": 18.9508,\n        \"longitude\": 72.8228\n      },\n      \"rating\": 3.5,\n        \"descriptions\": \"A basic hotel located near Crawford Market. Good value for budget travelers. Clean and comfortable rooms.\"\n    },\n     {\n      \"hotelName\": \"Hotel Al Madina Residency\",\n      \"hotelAddress\": \"28, 2nd Floor, Room 206, M.A. Road, Opp. JJ Hospital, Byculla, Mumbai, Maharashtra 400008\",\n      \"price\": \"₹1200 - ₹1800 per night\",\n      \"hotelImageUrl\": \"https://lh3.googleusercontent.com/p/AF1QipN896qN20-7Y1_Nf1R5qVjJzXo5oQJg5yW_m24l=w288-h192-n-rw\",\n       \"geoCoordinates\": {\n        \"latitude\": 18.9681,\n        \"longitude\": 72.8397\n      },\n      \"rating\": 3.2,\n         \"descriptions\":\"Simple and functional hotel in the Byculla area. Good accessibility to different parts of the city.\"\n    },\n    {\n        \"hotelName\": \"Hotel Grand\",\n       \"hotelAddress\":\"69-71, Maulana Azad Rd, Opp. Crawford Market, Mumbai, Maharashtra 400003\",\n       \"price\": \"₹1800 - ₹2500 per night\",\n       \"hotelImageUrl\": \"https://lh3.googleusercontent.com/p/AF1QipN6-n6-eQjE9X0j7g3F3t2l5P6Y0Z3u0b2F4t99=w288-h192-n-rw\",\n        \"geoCoordinates\": {\n         \"latitude\":18.9494,\n         \"longitude\":72.8309\n       },\n       \"rating\": 3.8,\n      \"descriptions\": \"Located near Crawford Market, this hotel offers decent facilities at a reasonable price. It is a popular choice among budget travelers. \"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Colonial Charm & Marine Drive\",\n      \"bestTimeToVisit\": \"Morning to Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Chhatrapati Shivaji Maharaj Terminus (CST)\",\n          \"placeDetails\": \"A UNESCO World Heritage Site, this historic railway station showcases magnificent Victorian Gothic architecture.  Exterior visit is free and worth.\",\n           \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Chhatrapati_Shivaji_Terminus_Mumbai.jpg/800px-Chhatrapati_Shivaji_Terminus_Mumbai.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 18.9401,\n            \"longitude\": 72.8346\n          },\n          \"ticketPricing\": \"Free (Exterior view)\",\n           \"timeTravel\": \"Walking distance\"\n        },\n          {\n          \"placeName\": \"Crawford Market\",\n          \"placeDetails\": \"A vibrant and bustling market known for its variety of goods like spices, fruits, and more. Experience the local energy.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Crawford_market_mumbai.JPG/800px-Crawford_market_mumbai.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 18.9486,\n            \"longitude\": 72.8306\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeTravel\": \"5 min Walk from CST\"\n        },\n         {\n          \"placeName\": \"Marine Drive\",\n          \"placeDetails\": \"A scenic promenade also known as the 'Queen's Necklace'. Enjoy a leisurely walk along the Arabian Sea.\",\n          \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Marine_Drive_Mumbai.jpg/800px-Marine_Drive_Mumbai.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 18.9443,\n            \"longitude\": 72.8254\n          },\n          \"ticketPricing\": \"Free\",\n            \"timeTravel\": \"10 minutes by local taxi from Crawford Market\"\n        },\n        {\n          \"placeName\": \"Girgaum Chowpatty\",\n          \"placeDetails\": \"A popular beach where you can enjoy street food and watch the sunset. A perfect place for Evening stroll.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Girgaum_Chowpatty_Mumbai_2022-04.jpg/800px-Girgaum_Chowpatty_Mumbai_2022-04.jpg\",\n           \"geoCoordinates\": {\n             \"latitude\": 18.9527,\n            \"longitude\": 72.8183\n          },\n          \"ticketPricing\": \"Free\",\n            \"timeTravel\": \"10 minutes by walk from Marine Drive\"\n        }\n      ]\n    },\n    \"day2\": {\n        \"theme\":\"Island City & Spiritual Sojourn\",\n         \"bestTimeToVisit\": \"Morning to Afternoon\",\n      \"places\": [\n        {\n          \"placeName\": \"Haji Ali Dargah\",\n          \"placeDetails\": \"A mosque and dargah located on an islet off the coast of Worli. An important spiritual and architectural site.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Haji_Ali_Dargah_2018.jpg/800px-Haji_Ali_Dargah_2018.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 18.9737,\n            \"longitude\": 72.8145\n          },\n          \"ticketPricing\": \"Free\",\n             \"timeTravel\": \"20 minutes by taxi from Girgaum Chowpatty\"\n        },\n        {\n          \"placeName\": \"Siddhivinayak Temple\",\n          \"placeDetails\": \"A revered Hindu temple dedicated to Lord Ganesha. Experience the devotion and peaceful atmosphere.\",\n          \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Siddhivinayak_Temple_Mumbai_2018.jpg/800px-Siddhivinayak_Temple_Mumbai_2018.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 19.0221,\n            \"longitude\": 72.8354\n          },\n            \"ticketPricing\": \"Free\",\n            \"timeTravel\":\"15 minutes by Taxi from Haji Ali\"\n\n        },\n           {\n          \"placeName\": \"Dharavi Slum\",\n           \"placeDetails\":\"Explore the vibrant community and industries within Dharavi, showcasing a different side of Mumbai. It is a good experience to understand the Mumbai. Guided tours are recommended.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Dharavi_Slum_Mumbai.JPG/800px-Dharavi_Slum_Mumbai.JPG\",\n           \"geoCoordinates\": {\n           \"latitude\": 19.0445,\n           \"longitude\": 72.8502\n          },\n            \"ticketPricing\": \"₹500-₹1000 per person(for a guided tour)\",\n            \"timeTravel\": \"20 min by taxi from Siddhivinayak Temple\"\n        }\n\n      ]\n    },\n     \"day3\": {\n        \"theme\": \"Caves & Local Exploration\",\n         \"bestTimeToVisit\": \"Morning to Afternoon\",\n      \"places\": [\n         {\n            \"placeName\": \"Kanheri Caves\",\n           \"placeDetails\": \"Ancient Buddhist caves located within the Sanjay Gandhi National Park. It's a historical site with rock-cut structures and carvings.\",\n            \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Kanheri_Caves_entrance.jpg/800px-Kanheri_Caves_entrance.jpg\",\n             \"geoCoordinates\": {\n            \"latitude\": 19.2111,\n            \"longitude\": 72.9193\n          },\n           \"ticketPricing\": \"₹25 per person\",\n           \"timeTravel\": \"1 hr by local train and auto-rickshaw from Dharavi\"\n          },\n          {\n          \"placeName\": \"Juhu Beach\",\n          \"placeDetails\": \"A famous beach known for street food and evening activities. Relax and enjoy the beach atmosphere.\",\n           \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Juhu_Beach_Mumbai.jpg/800px-Juhu_Beach_Mumbai.jpg\",\n            \"geoCoordinates\": {\n             \"latitude\": 19.1067,\n            \"longitude\": 72.8241\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeTravel\": \"1 hr by local train and auto rickshaw from kanheri caves\"\n        },\n        {\n          \"placeName\":\"Bandra-Worli Sea Link\",\n          \"placeDetails\": \"An iconic bridge over the Arabian Sea. Admire the architectural marvel from a distance.\",\n           \"placeImageUrl\":\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Bandra_Worli_Sea_Link_Mumbai.jpg/800px-Bandra_Worli_Sea_Link_Mumbai.jpg\",\n             \"geoCoordinates\": {\n             \"latitude\": 19.0200,\n             \"longitude\": 72.8274\n          },\n          \"ticketPricing\": \"Free (Viewing from afar)\",\n          \"timeTravel\":\"30 mins by taxi from Juhu beach\"\n\n        }\n      ]\n    }\n  }\n}\n```\n**Important Notes:**\n\n*   **Budget:** The price for hotels and food is an estimate. It can vary depending on the time of year and availability. Local transport and street food are generally cheap.\n*  **Food:** Enjoy local street food, it's a delicious and cost-effective option.\n*   **Transportation:** Mumbai has a good local train system which is very cheap and recommended way to travel around, auto-rickshaws, taxis and buses are also available.\n*   **Safety:** Mumbai is generally safe, but be aware of your surroundings and take normal precautions.\n*   **Flexibility:** This itinerary is a suggestion, feel free to adjust it based on your interests and preferences.\n* **Time Management:** Mumbai traffic can be unpredictable, especially during rush hours. Plan your timings accordingly.\n\nLet me know if you would like any modifications to this plan!\n"},
          ],
        },
      ],
    });